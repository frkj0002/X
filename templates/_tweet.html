<article class="post" id="post_{{ tweet.post_pk }}" mix-fade-in="5000">
    <img src="{{ url_for('static', filename='images/user_avatars/'~(tweet.user_avatar_path if tweet.user_avatar_path else 'unknown.jpg')) }}"
        alt="Profile Picture" class="w-8 h-8 rounded-full">
    <div class="post-content">
        <div class="post-header">
            <span class="name">
                {{ tweet.user_first_name }}
                {{ tweet.user_last_name }}
            </span>
            <span class="handle">@{{ tweet.user_username }}</span> Â· <span class="time">1d</span>
        </div>

        <!-- {% if session.user and session.user.user_pk == tweet.post_user_fk %}
        <button class="cursor-pointer" mix-delete="{{ url_for('delete_post', post_pk=tweet.post_pk) }}">
            <i class="fa-solid fa-trash"></i> Delete
        </button>
        {% endif %} -->

        {% if session.user and session.user.user_pk == tweet.post_user_fk %}
        <a href="{{ url_for('delete_post', post_pk=tweet.post_pk) }}" class="cursor-pointer" mix-delete
            mix-remove="#post_{{ tweet.post_pk }}">
            <i class="fa-solid fa-trash"></i> Delete
        </a>

        <!-- <a href="#" class="cursor-pointer" onclick="editPost('{{ tweet.post_pk }}', '{{ tweet.post_message }}')">
            <i class="fa-solid fa-pen"></i> Edit
        </a> -->

        <a href="{{ url_for('edit_post', post_pk=tweet.post_pk) }}" mix-get mix-update="#post_{{ tweet.post_pk }}">
            <i class="fa-solid fa-pen"></i> Edit
        </a>
        {% endif %}

        <p class="text">
            {{ tweet.post_message }}
        </p>
        {% if tweet.post_image_path: %}
        <img src="{{ url_for('static', filename='images/post_images/' ~ tweet.post_image_path) }}" alt="Post image"
            class="w-80">
        {% endif %}

        <div class="post-actions">
            <span class="action comment-toggle" data-target="comment_box_{{ post_pk }}"><i
                    class="fa-regular fa-comment"></i> {{ tweet.post_total_comments }} </span>

            <span class="action"><i class="fa-solid fa-retweet"></i> 5</span>
            {% include "___button_like_tweet.html" %}
            <span class="action"><i class="fa-solid fa-chart-simple"></i> 230</span>
            <span class="action"><i class="fa-solid fa-share"></i></span>
        </div>

        <div class="post-actions">
            <form class="action">
                <input type="hidden" name="post_pk" value="{{ tweet.post_pk }}">
                <input type="text" name="comment" id="comment_input_{{ tweet.post_pk }}"
                    placeholder="Write a comment..." class="comment-input">
                <button type="submit" mix-post="{{ url_for('add_comment') }}"
                    mix-bottom="#comment_list_{{ tweet.post_pk }}" mix-default="Add Comment" mix-await="Posting...">
                    Add Comment
                </button>
            </form>
        </div>

        <!-- Comment section -->
        <div class="comments-section" id="comments_{{ tweet.post_pk }}">
            <div id="comments_list_{{ tweet.post_pk }}">
                {% for comment in tweet.comments %}
                {% include "_comment.html" %}
                {% endfor %}
            </div>
        </div>

</article>