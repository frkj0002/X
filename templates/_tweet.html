<article class="post" id="post_{{ tweet.post_pk }}" mix-fade-in="5000">
    <img src="{{ url_for('static', filename='images/user_avatars/'~(tweet.user_avatar_path if tweet.user_avatar_path else 'unknown.jpg')) }}"
        alt="Profile Picture" class="w-8 h-8 rounded-full">
    <div class="post-content">
        <div class="post-header">
            <span class="name">
                {{ tweet.user_first_name }}
                {{ tweet.user_last_name }}
            </span>
            <span class="handle">@{{ tweet.user_username }}</span> Â· <span class="time">1d</span>
        </div>

        {% if session.user and session.user.user_pk == tweet.post_user_fk %}
        <a href="{{ url_for('delete_post', post_pk=tweet.post_pk) }}" class="cursor-pointer text-c-black" mix-delete
            mix-remove="#post_{{ tweet.post_pk }}">
            <i class="fa-solid fa-trash pointer-e-none"></i>
        </a>

        <a href="{{ url_for('edit_post', post_pk=tweet.post_pk) }}" class="cursor-pointer text-c-black" mix-get
            mix-update="#post_{{ tweet.post_pk }}">
            <i class="fa-solid fa-pen pointer-e-none"></i>
        </a>
        {% endif %}

        <p class="text">
            {{ tweet.post_message }}
        </p>
        {% if tweet.post_image_path: %}
        <img src="{{ url_for('static', filename='images/post_images/' ~ tweet.post_image_path) }}" alt="Post image"
            class="w-80">
        {% endif %}

        <div class="post-actions">
            <span class="action comment-toggle" data-target="comment_box_{{ post_pk }}"><i
                    class="fa-regular fa-comment"></i> {{ tweet.post_total_comments }} </span>

            <span class="action"><i class="fa-solid fa-retweet"></i> 5</span>

            <div id="like_container_{{ tweet.post_pk }}">
                <form method="post" class="action cursor-pointer" mix-post="{{ url_for('like_toggle') }}">
                    <input type="hidden" name="post_pk" value="{{ tweet.post_pk }}">
                    <button type="submit" class="action pointer-e-none">

                        <span id="like_icon_{{ tweet.post_pk }}" class="pointer-e-none">
                            {% if tweet.user_liked %}
                            <i class="fa-solid fa-heart"></i>
                            {% else %}
                            <i class="fa-regular fa-heart"></i>
                            {% endif %}
                        </span>

                        <span id="like_count_{{ tweet.post_pk }}">
                            {{ tweet.post_total_likes }}
                        </span>
                    </button>
                </form>
            </div>

            <span class="action"><i class="fa-solid fa-chart-simple"></i> 230</span>
            <span class="action"><i class="fa-solid fa-share"></i></span>
        </div>

        <div id="comments_list_{{ tweet.post_pk }}">
            <button mix-get="{{ url_for('comments', post_pk=tweet.post_pk) }}"
                mix-update="#comments_list_{{ tweet.post_pk }}">
                Load comments
            </button>
        </div>
    </div>
</article>